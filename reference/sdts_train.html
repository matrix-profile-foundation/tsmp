<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Framework for Scalable Dictionary learning for Time Series (SDTS) training function — sdts_train • tsmp</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Framework for Scalable Dictionary learning for Time Series (SDTS) training function — sdts_train" />
<meta property="og:description" content="This function trains a model that uses a dictionary to predict state changes. Differently from
fluss(), it doesn't look for semantic changes (that may be several), but for binary states like
&quot;on&quot; or &quot;off&quot;. Think for example that a human annotator is pressing a switch any time he thinks
that the recorded data is relevant, and releases the switch when he thinks the data is noise. This
algorithm will learn the switching points (even better) and try to predict using new data." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tsmp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/press.html">Time Series with Matrix Profile</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/matrix-profile-foundation/tsmp/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Framework for Scalable Dictionary learning for Time Series (SDTS) training function</h1>
    <small class="dont-index">Source: <a href='https://github.com/matrix-profile-foundation/tsmp/blob/master/R/sdts-train.R'><code>R/sdts-train.R</code></a></small>
    <div class="hidden name"><code>sdts_train.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function trains a model that uses a dictionary to predict state changes. Differently from
<code><a href='fluss.html'>fluss()</a></code>, it doesn't look for semantic changes (that may be several), but for binary states like
"on" or "off". Think for example that a human annotator is pressing a switch any time he thinks
that the recorded data is relevant, and releases the switch when he thinks the data is noise. This
algorithm will learn the switching points (even better) and try to predict using new data.</p>
    </div>

    <pre class="usage"><span class='fu'>sdts_train</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>label</span>,
  <span class='va'>window_size</span>,
  beta <span class='op'>=</span> <span class='fl'>1</span>,
  pat_max <span class='op'>=</span> <span class='cn'>Inf</span>,
  n_workers <span class='op'>=</span> <span class='fl'>1</span>,
  verbose <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span><span class='op'>(</span><span class='st'>"tsmp.verbose"</span>, <span class='fl'>2</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>a <code>vector</code> of <code>numeric</code>. Time series.</p></td>
    </tr>
    <tr>
      <th>label</th>
      <td><p>a <code>vector</code> of <code>logical</code>. Annotations.</p></td>
    </tr>
    <tr>
      <th>window_size</th>
      <td><p>an <code>int</code> or a <code>vector</code> of <code>int</code>. Sliding window sizes.</p></td>
    </tr>
    <tr>
      <th>beta</th>
      <td><p>a <code>numeric</code>. See details. (default is <code>1</code>).</p></td>
    </tr>
    <tr>
      <th>pat_max</th>
      <td><p>an <code>int</code>. Max number of shape features captured. (default is <code>Inf</code>).</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>an <code>int</code>. See details. (Default is <code>2</code>).</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>a <code>logical</code>. Use parallel computation inside (default is <code>FALSE</code>).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a list with the learned dictionary <code>score</code> (estimated score), <code>score_hist</code>
(history of scores), <code>pattern</code> (shape features), <code>thold</code> (threshold values).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>beta</code> is used to balance F-score towards recall (<code>&gt;1</code>) or precision (<code>&lt;1</code>). <code>verbose</code> changes
how much information is printed by this function; <code>0</code> means nothing, <code>1</code> means text, <code>2</code> adds the
progress bar, <code>3</code> adds the finish sound.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
<ul>
<li><p>Yeh C-CM, Kavantzas N, Keogh E. Matrix profile IV: Using Weakly Labeled Time Series
to Predict Outcomes. Proc VLDB Endow. 2017 Aug 1;10(12):1802-12.</p></li>
</ul>

<p>Website: <a href='https://sites.google.com/view/weaklylabeled'>https://sites.google.com/view/weaklylabeled</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other Scalable Dictionaries: 
<code><a href='sdts_predict.html'>sdts_predict</a>()</code>,
<code><a href='sdts_score.html'>sdts_score</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># This is a fast toy example and results are useless. For a complete result, run the code inside</span>
<span class='co'>#' Not run' section below.</span>
<span class='va'>w</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>110</span>, <span class='fl'>220</span><span class='op'>)</span>
<span class='va'>subs</span> <span class='op'>&lt;-</span> <span class='fl'>11000</span><span class='op'>:</span><span class='fl'>20000</span>
<span class='va'>tr_data</span> <span class='op'>&lt;-</span> <span class='va'>mp_test_data</span><span class='op'>$</span><span class='va'>train</span><span class='op'>$</span><span class='va'>data</span><span class='op'>[</span><span class='va'>subs</span><span class='op'>]</span>
<span class='va'>tr_label</span> <span class='op'>&lt;-</span> <span class='va'>mp_test_data</span><span class='op'>$</span><span class='va'>train</span><span class='op'>$</span><span class='va'>label</span><span class='op'>[</span><span class='va'>subs</span><span class='op'>]</span>
<span class='va'>te_data</span> <span class='op'>&lt;-</span> <span class='va'>mp_test_data</span><span class='op'>$</span><span class='va'>test</span><span class='op'>$</span><span class='va'>data</span><span class='op'>[</span><span class='va'>subs</span><span class='op'>]</span>
<span class='va'>te_label</span> <span class='op'>&lt;-</span> <span class='va'>mp_test_data</span><span class='op'>$</span><span class='va'>test</span><span class='op'>$</span><span class='va'>label</span><span class='op'>[</span><span class='va'>subs</span><span class='op'>]</span>
<span class='va'>model</span> <span class='op'>&lt;-</span> <span class='fu'>sdts_train</span><span class='op'>(</span><span class='va'>tr_data</span>, <span class='va'>tr_label</span>, <span class='va'>w</span>, verbose <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in mat_pro[[i]]: subscript out of bounds</span></div><div class='input'><span class='va'>predict</span> <span class='op'>&lt;-</span> <span class='fu'><a href='sdts_predict.html'>sdts_predict</a></span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>te_data</span>, <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>w</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in sdts_predict(model, te_data, round(mean(w))): object 'model' not found</span></div><div class='input'><span class='fu'><a href='sdts_score.html'>sdts_score</a></span><span class='op'>(</span><span class='va'>predict</span>, <span class='va'>te_label</span>, <span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in pred_tmp[seq_len(length(pred))] &lt;- pred: incompatible types (from closure to logical) in subassignment type fix</span></div><div class='input'><span class='co'># \donttest{</span>
<span class='va'>windows</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>110</span>, <span class='fl'>220</span>, <span class='fl'>330</span><span class='op'>)</span>
<span class='va'>model</span> <span class='op'>&lt;-</span> <span class='fu'>sdts_train</span><span class='op'>(</span><span class='va'>mp_test_data</span><span class='op'>$</span><span class='va'>train</span><span class='op'>$</span><span class='va'>data</span>, <span class='va'>mp_test_data</span><span class='op'>$</span><span class='va'>train</span><span class='op'>$</span><span class='va'>label</span>, <span class='va'>windows</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Stage 1 of 3, compute matrix profile...</span></div><div class='output co'>#&gt; <span class='error'>Error in mat_pro[[i]]: subscript out of bounds</span></div><div class='input'><span class='va'>predict</span> <span class='op'>&lt;-</span> <span class='fu'><a href='sdts_predict.html'>sdts_predict</a></span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>mp_test_data</span><span class='op'>$</span><span class='va'>test</span><span class='op'>$</span><span class='va'>data</span>, <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>windows</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in sdts_predict(model, mp_test_data$test$data, round(mean(windows))): object 'model' not found</span></div><div class='input'><span class='fu'><a href='sdts_score.html'>sdts_score</a></span><span class='op'>(</span><span class='va'>predict</span>, <span class='va'>mp_test_data</span><span class='op'>$</span><span class='va'>test</span><span class='op'>$</span><span class='va'>label</span>, <span class='fl'>1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in pred_tmp[seq_len(length(pred))] &lt;- pred: incompatible types (from closure to logical) in subassignment type fix</span></div><div class='input'><span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Francisco Bischoff.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


