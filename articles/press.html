<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Time Series with Matrix Profile • tsmp</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Time Series with Matrix Profile">
<meta property="og:description" content="tsmp">
<meta property="og:image" content="https://matrixprofile.org/tsmp/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tsmp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.15</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/press.html">Time Series with Matrix Profile</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/matrix-profile-foundation/tsmp/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Time Series with Matrix Profile</h1>
                        <h4 data-toc-skip class="author">Francisco
Bischoff</h4>
            
            <h4 data-toc-skip class="date">2022-08-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/matrix-profile-foundation/tsmp/blob/HEAD/vignettes/press.Rmd" class="external-link"><code>vignettes/press.Rmd</code></a></small>
      <div class="hidden name"><code>press.Rmd</code></div>

    </div>

    
    
<p>Recently I began to look further into Time Series(TS). During the
course of my Master’s degree, I used the <a href="https://CRAN.R-project.org/package=forecast" class="external-link">forecast</a> package
quite a bit (Thanks to Prof. Hyndman), and TS got my attention. So,
after reading lots of publications about everything you can imagine
about TS, I came across one publication from Prof. Eamonn, of the
University of California, that made me contact him to ask a few
questions. After receiving a huge amount of information from him, one
particular subject caught my attention: Matrix Profile. I was so much
impressed that I started to write the <a href="https://franzbischoff.github.io/tsmp/" class="external-link">TSMP R Package</a>.</p>
<p>Enough talking, so what is a Matrix Profile? Why should you care
about it?</p>
<div class="section level2">
<h2 id="matrix-profile">Matrix Profile<a class="anchor" aria-label="anchor" href="#matrix-profile"></a>
</h2>
<p>If you are here, you are likely aware of what a Distance Matrix (DM)
is. If not, think about those tables that used to be on maps with the
distance between cities. It is widely used in TS for clustering,
classification, motif search etc. But, even for modestly sized datasets,
the algorithms can take months to compute it and even with speed-up
techniques (i.e., indexing, lower-bounding, early abandoning) they can
be, at best, one or two orders of magnitude faster.</p>
<p>Matrix Profile it’s like a DM but faster (much faster) to compute.
<em>Figure 1</em> shows a DM and a Matrix Profile. As you can see, in
the Matrix Profile, as the name suggests, you see the Profile of a DM.
It stores the minimum Euclidean distance of every subset of one TS
(think of a Sliding Window) with another (or itself, called Self-Join).
It also stores a companion vector called Profile Index, that gives us
the index of each nearest neighbor.</p>
<div class="figure">
<img src="mp_1.png" alt="Figure 1: Distance Matrix and its Matrix Profile." width="350" height="350"><p class="caption">
Figure 1: Distance Matrix and its Matrix Profile.
</p>
</div>
<p>And is this good?</p>
</div>
<div class="section level2">
<h2 id="why-should-you-care">Why should you care?<a class="anchor" aria-label="anchor" href="#why-should-you-care"></a>
</h2>
<p>DM usually stores redundant information, useless for most TS
applications. The Matrix Profile has a host of interesting and
exploitable properties. For example, the highest point on the Matrix
Profile corresponds to the TS discord, the (tied) lowest points
correspond to the locations of the best TS motif pair, and the variance
can be seen as a measure of the TS complexity. Moreover, the histogram
of the values in the Matrix Profile is the exact answer to the TS
density estimation. Particularly, it has implications for TS motif
discovery, TS joins, shapelet discovery (classification), density
estimation, semantic segmentation, visualization, rule discovery,
clustering etc.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p>This method has the following advantages/features:</p>
<ul>
<li>It is <strong>exact</strong>, providing no false positives or false
dismissals.</li>
<li>It is <strong>simple</strong> and parameter-free. In contrast, the
more general metric space APSS<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> algorithms require building and tuning
spatial access methods and/or hash functions.</li>
<li>It requires an inconsequential space overhead, just O(<em>n</em>)
with a small constant factor.</li>
<li>It is extremely <strong>scalable</strong>, and for <em>extremely
large</em> datasets we can compute the results in an anytime fashion,
allowing ultra-fast <em>approximate</em> solutions.</li>
<li>Having computed the similarity join for a dataset, we can
incrementally update it very efficiently. In many domains, this means we
can effectively maintain exact joins on <strong>streaming data</strong>
forever.</li>
<li>It provides <em>full joins</em>, eliminating the need to specify a
similarity <em>threshold</em>, which is a near impossible task in this
domain.</li>
<li>It is embarrassingly <strong>parallelizable</strong>, both on
multicore processors and in distributed systems.</li>
</ul>
<div class="section level3">
<h3 id="performance-on-an-intelr-coretm-i7-7700-cpu-3-60ghz-using-a-random-walk-dataset">Performance on an Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz using a
random walk dataset<a class="anchor" aria-label="anchor" href="#performance-on-an-intelr-coretm-i7-7700-cpu-3-60ghz-using-a-random-walk-dataset"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2018</span><span class="op">)</span>
<span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fl">40000</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="18%">
<col width="24%">
<col width="18%">
<col width="22%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th></th>
<th align="center">Elapsed Time<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>
</th>
<th align="center">Data size</th>
<th align="center">Window size</th>
<th align="center">Threads</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="../reference/scrimp.html">scrimp()</a></code></td>
<td align="center">45.30s</td>
<td align="center">40000</td>
<td align="center">1000</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td><code><a href="../reference/stomp.html">stomp_par()</a></code></td>
<td align="center">52.72s</td>
<td align="center">40000</td>
<td align="center">1000</td>
<td align="center">8</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/stomp.html">stomp()</a></code></td>
<td align="center">136.01s</td>
<td align="center">40000</td>
<td align="center">1000</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td><code><a href="../reference/stamp.html">stamp_par()</a></code></td>
<td align="center">140.25s</td>
<td align="center">40000</td>
<td align="center">1000</td>
<td align="center">8</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/stamp.html">stamp()</a></code></td>
<td align="center">262.03s</td>
<td align="center">40000</td>
<td align="center">1000</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="further-readings">Further readings<a class="anchor" aria-label="anchor" href="#further-readings"></a>
</h2>
<p>All information you need to get started with Matrix Profiles is
available at the <a href="http://www.cs.ucr.edu/~eamonn/MatrixProfile.html" class="external-link">UCR Matrix
Profile</a> webpage. Papers, Slides, examples, are available there.</p>
<p>Once become more familiar with this concept, you can start reading
the <a href="https://franzbischoff.github.io/tsmp/" class="external-link">TSMP R Package</a>
documentation.</p>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>For pure <a href="https://en.wikipedia.org/wiki/Similarity_search" class="external-link">similarity
search</a>, it is suggested you see <a href="http://www.cs.unm.edu/~mueen/FastestSimilaritySearch.html" class="external-link">MASS</a>
for Euclidean Distance, and the <a href="http://www.cs.ucr.edu/~eamonn/UCRsuite.html" class="external-link">UCR Suite</a> for
DTW<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>All Pairs Similarity Search<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>These are results using only R code, no low-level C code
optimizations<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Francisco Bischoff.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
