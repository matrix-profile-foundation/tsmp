<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Time Series with Matrix Profile • tsmp</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Time Series with Matrix Profile">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tsmp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/press.html">Time Series with Matrix Profile</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/matrix-profile-foundation/tsmp">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Time Series with Matrix Profile</h1>
                        <h4 class="author">Francisco Bischoff</h4>
            
            <h4 class="date">2019-12-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/matrix-profile-foundation/tsmp/blob/master/vignettes/press.Rmd"><code>vignettes/press.Rmd</code></a></small>
      <div class="hidden name"><code>press.Rmd</code></div>

    </div>

    
    
<p>Recently I began to look further into Time Series(TS). During the course of my Master’s degree, I used the <a href="https://CRAN.R-project.org/package=forecast">forecast</a> package quite a bit (Thanks to Prof. Hyndman), and TS got my attention. So, after reading lots of publications about everything you can imagine about TS, I came across one publication from Prof. Eamonn, of the University of California, that made me contact him to ask a few questions. After receiving a huge amount of information from him, one particular subject caught my attention: Matrix Profile. I was so much impressed that I started to write the <a href="https://franzbischoff.github.io/tsmp/">TSMP R Package</a>.</p>
<p>Enough talking, so what is a Matrix Profile? Why should you care about it?</p>
<div id="matrix-profile" class="section level2">
<h2 class="hasAnchor">
<a href="#matrix-profile" class="anchor"></a>Matrix Profile</h2>
<p>If you are here, you are likely aware of what a Distance Matrix (DM) is. If not, think about those tables that used to be on maps with the distance between cities. It is widely used in TS for clustering, classification, motif search etc. But, even for modestly sized datasets, the algorithms can take months to compute it and even with speed-up techniques (i.e., indexing, lower-bounding, early abandoning) they can be, at best, one or two orders of magnitude faster.</p>
<p>Matrix Profile it’s like a DM but faster (much faster) to compute. <em>Figure 1</em> shows a DM and a Matrix Profile. As you can see, in the Matrix Profile, as the name suggests, you see the Profile of a DM. It stores the minimum Euclidean distance of every subset of one TS (think of a Sliding Window) with another (or itself, called Self-Join). It also stores a companion vector called Profile Index, that gives us the index of each nearest neighbor.</p>
<div class="figure">
<img src="mp_1.png" alt="Figure 1: Distance Matrix and its Matrix Profile." width="350" height="350"><p class="caption">
Figure 1: Distance Matrix and its Matrix Profile.
</p>
</div>
<p>And is this good?</p>
</div>
<div id="why-should-you-care" class="section level2">
<h2 class="hasAnchor">
<a href="#why-should-you-care" class="anchor"></a>Why should you care?</h2>
<p>DM usually stores redundant information, useless for most TS applications. The Matrix Profile has a host of interesting and exploitable properties. For example, the highest point on the Matrix Profile corresponds to the TS discord, the (tied) lowest points correspond to the locations of the best TS motif pair, and the variance can be seen as a measure of the TS complexity. Moreover, the histogram of the values in the Matrix Profile is the exact answer to the TS density estimation. Particularly, it has implications for TS motif discovery, TS joins, shapelet discovery (classification), density estimation, semantic segmentation, visualization, rule discovery, clustering etc.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p>This method has the following advantages/features:</p>
<ul>
<li>It is <strong>exact</strong>, providing no false positives or false dismissals.</li>
<li>It is <strong>simple</strong> and parameter-free. In contrast, the more general metric space APSS<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> algorithms require building and tuning spatial access methods and/or hash functions.</li>
<li>It requires an inconsequential space overhead, just O(<em>n</em>) with a small constant factor.</li>
<li>It is extremely <strong>scalable</strong>, and for <em>extremely large</em> datasets we can compute the results in an anytime fashion, allowing ultra-fast <em>approximate</em> solutions.</li>
<li>Having computed the similarity join for a dataset, we can incrementally update it very efficiently. In many domains, this means we can effectively maintain exact joins on <strong>streaming data</strong> forever.</li>
<li>It provides <em>full joins</em>, eliminating the need to specify a similarity <em>threshold</em>, which is a near impossible task in this domain.</li>
<li>It is embarrassingly <strong>parallelizable</strong>, both on multicore processors and in distributed systems.</li>
</ul>
<div id="performance-on-an-intelr-coretm-i7-7700-cpu-3-60ghz-using-a-random-walk-dataset" class="section level3">
<h3 class="hasAnchor">
<a href="#performance-on-an-intelr-coretm-i7-7700-cpu-3-60ghz-using-a-random-walk-dataset" class="anchor"></a>Performance on an Intel(R) Core(TM) i7-7700 CPU @ 3.60GHz using a random walk dataset</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">2018</span>)</a>
<a class="sourceLine" id="cb1-2" title="2">data &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/sample.html">sample</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>), <span class="dv">40000</span>, <span class="ot">TRUE</span>))</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="center">Elapsed Time<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>
</th>
<th align="center">Data size</th>
<th align="center">Window size</th>
<th align="center">Threads</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="../reference/scrimp.html">scrimp()</a></code></td>
<td align="center">45.30s</td>
<td align="center">40000</td>
<td align="center">1000</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td><code><a href="../reference/stomp.html">stomp_par()</a></code></td>
<td align="center">52.72s</td>
<td align="center">40000</td>
<td align="center">1000</td>
<td align="center">8</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/stomp.html">stomp()</a></code></td>
<td align="center">136.01s</td>
<td align="center">40000</td>
<td align="center">1000</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td><code><a href="../reference/stamp.html">stamp_par()</a></code></td>
<td align="center">140.25s</td>
<td align="center">40000</td>
<td align="center">1000</td>
<td align="center">8</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/stamp.html">stamp()</a></code></td>
<td align="center">262.03s</td>
<td align="center">40000</td>
<td align="center">1000</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="further-readings" class="section level2">
<h2 class="hasAnchor">
<a href="#further-readings" class="anchor"></a>Further readings</h2>
<p>All information you need to get started with Matrix Profiles is available at the <a href="http://www.cs.ucr.edu/~eamonn/MatrixProfile.html">UCR Matrix Profile</a> webpage. Papers, Slides, examples, are available there.</p>
<p>Once become more familiar with this concept, you can start reading the <a href="https://franzbischoff.github.io/tsmp/">TSMP R Package</a> documentation.</p>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>For pure <a href="https://en.wikipedia.org/wiki/Similarity_search">similarity search</a>, it is suggested you see <a href="http://www.cs.unm.edu/~mueen/FastestSimilaritySearch.html">MASS</a> for Euclidean Distance, and the <a href="http://www.cs.ucr.edu/~eamonn/UCRsuite.html">UCR Suite</a> for DTW<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>All Pairs Similarity Search<a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>These are results using only R code, no low-level C code optimizations<a href="#fnref3" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#matrix-profile">Matrix Profile</a></li>
      <li><a href="#why-should-you-care">Why should you care?</a></li>
      <li><a href="#further-readings">Further readings</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Francisco Bischoff.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
