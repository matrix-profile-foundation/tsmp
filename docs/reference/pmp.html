<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Pan-Matrix Profile — pmp • tsmp</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Pan-Matrix Profile — pmp" />
<meta property="og:description" content="Computes the Pan-Matrix Profile (PMP) for the given time series." />
<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tsmp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/press.html">Time Series with Matrix Profile</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/matrix-profile-foundation/tsmp">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Pan-Matrix Profile</h1>
    <small class="dont-index">Source: <a href='https://github.com/matrix-profile-foundation/tsmp/blob/master/R/pmp.R'><code>R/pmp.R</code></a></small>
    <div class="hidden name"><code>pmp.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Computes the Pan-Matrix Profile (PMP) for the given time series.</p>
    </div>

    <pre class="usage"><span class='fu'>pmp</span>(
  <span class='no'>data</span>,
  <span class='kw'>window_sizes</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq.int</a></span>(<span class='kw'>from</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>to</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>data</span>)/<span class='fl'>2</span>, <span class='kw'>length.out</span> <span class='kw'>=</span> <span class='fl'>20</span>),
  <span class='kw'>plot</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>pmp_obj</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>n_workers</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"tsmp.verbose"</span>, <span class='fl'>2</span>)
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>a <code>matrix</code> or a <code>vector</code> of <code>numeric</code>.</p></td>
    </tr>
    <tr>
      <th>window_sizes</th>
      <td><p>a <code>vector</code> of the window sizes that will be evaluated. They will be rounded to the lower integer
and sorted. (Default is a sequence of 20 values from 10 to half data size).</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p>a <code>logical</code>. If <code>TRUE</code>, every new computation will be plotted. (Default is <code>FALSE</code>).</p></td>
    </tr>
    <tr>
      <th>pmp_obj</th>
      <td><p>a <code>PMP</code> object that may or not contain an upper bound value, and previous computed profiles. The function will
add new profiles, not replace. (Default is <code>NULL</code>).</p></td>
    </tr>
    <tr>
      <th>n_workers</th>
      <td><p>an <code>int</code>. Number of workers for parallel. (Default is <code>1</code>).</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>an <code>int</code>. See details. (Default is <code>2</code>).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a <code>PMP</code> object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The work closest in spirit to ours is VALMOD. The idea of VALMOD is to compute the MP for
the shortest length of interest, then use the information gleaned from it to guide a search
through longer subsequence lengths, exploiting lower bounds to prune off some calculations.
This idea works well for the first few of the longer subsequence lengths, but the lower bounds
progressively weaken, making the pruning ineffective. Thus, in the five case studies they
presented, the mean value of U/L was just 1.24. In contrast, consider that our termite example
in Fig. 15 has a U/L ratio of 240, more than two orders of magnitude larger. Thus, VALMOD is
perhaps best seen as finding motifs with some tolerance for a slightly (~25%) too short
user-specified query length, rather than a true "motif-of-all-lengths" algorithm. Also note
that apart from the shortest length, VALMOD only gives some information for the other lengths,
unlike pmp, which contains exact distances for all subsequences of all lengths.</p>
<p>When just the <code>data</code> is provided, the exploration will be done using the default <code>window_sizes</code> that is a sequence
of 20 values between 10 and the half data size and the resulting object will have an <code>upper_bound</code> equals to <code>Inf</code>.
If an object is provided by the argument <code>pmp_obj</code>, this function will add more information to the resulting object,
never changing the values already computed.
<code>verbose</code> changes how much information is printed by this function; <code>0</code> means nothing, <code>1</code> means text, <code>2</code>
adds the progress bar, <code>3</code> adds the finish sound.</p>
<p>Talk about upper bound and window sizes</p><ol>
<li><p>upper_window will be set to Inf on new objects
1.1. upper_window will also be used for plot, and for discovery, it must not remove any existing data from the object</p></li>
<li><p>window_sizes is used for plot, it must not remove any mp inside the object
2.1. window_sizes tells the function what mp are stored, it may be updated with as.numeric(names(pmp))</p></li>
<li><p>the functions must be capable to handle the data without need to sort by window_size, but sort may be useful later(?)</p></li>
</ol>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Just compute</span>
<span class='no'>pan</span> <span class='kw'>&lt;-</span> <span class='fu'>pmp</span>(<span class='no'>mp_gait_data</span>)</div><div class='output co'>#&gt; <span class='message'>step: 1/20 binary idx: 1 window: 10</span></div><div class='output co'>#&gt; <span class='message'>step: 2/20 binary idx: 11 window: 242</span></div><div class='output co'>#&gt; <span class='message'>step: 3/20 binary idx: 6 window: 126</span></div><div class='output co'>#&gt; <span class='message'>step: 4/20 binary idx: 16 window: 358</span></div><div class='output co'>#&gt; <span class='message'>step: 5/20 binary idx: 3 window: 56</span></div><div class='output co'>#&gt; <span class='message'>step: 6/20 binary idx: 8 window: 172</span></div><div class='output co'>#&gt; <span class='message'>step: 7/20 binary idx: 13 window: 289</span></div><div class='output co'>#&gt; <span class='message'>step: 8/20 binary idx: 18 window: 405</span></div><div class='output co'>#&gt; <span class='message'>step: 9/20 binary idx: 2 window: 33</span></div><div class='output co'>#&gt; <span class='message'>step: 10/20 binary idx: 4 window: 79</span></div><div class='output co'>#&gt; <span class='message'>step: 11/20 binary idx: 7 window: 149</span></div><div class='output co'>#&gt; <span class='message'>step: 12/20 binary idx: 9 window: 196</span></div><div class='output co'>#&gt; <span class='message'>step: 13/20 binary idx: 12 window: 265</span></div><div class='output co'>#&gt; <span class='message'>step: 14/20 binary idx: 14 window: 312</span></div><div class='output co'>#&gt; <span class='message'>step: 15/20 binary idx: 17 window: 382</span></div><div class='output co'>#&gt; <span class='message'>step: 16/20 binary idx: 19 window: 428</span></div><div class='output co'>#&gt; <span class='message'>step: 17/20 binary idx: 5 window: 103</span></div><div class='output co'>#&gt; <span class='message'>step: 18/20 binary idx: 10 window: 219</span></div><div class='output co'>#&gt; <span class='message'>step: 19/20 binary idx: 15 window: 335</span></div><div class='output co'>#&gt; <span class='message'>step: 20/20 binary idx: 20 window: 452</span></div><div class='output co'>#&gt; <span class='message'>on.exit OBJ</span></div><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># Compute the upper bound, than add new profiles</span>
<span class='no'>pan</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='pmp_upper_bound.html'>pmp_upper_bound</a></span>(<span class='no'>mp_gait_data</span>)
<span class='no'>pan</span> <span class='kw'>&lt;-</span> <span class='fu'>pmp</span>(<span class='no'>mp_gait_data</span>, <span class='kw'>pmp_obj</span> <span class='kw'>=</span> <span class='no'>pan</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Francisco Bischoff.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


